{% extends "base.html" %}

{% block title %}log인곽{% endblock %}

{% block content %}
<main>
    <aside class="sidebar left-sidebar">
        <div class="widget">
            <h3>전체 게시판 목록</h3>
            <ul>
                <li><a href="/board/1">자유게시판</a></li>
                <li><a href="/board/2">정보게시판</a></li>
                <li><a href="#" onclick="alert('아직 지원되지 않는 기능입니다.')">지식iN곽</a></li>
                <li><a href="#" onclick="alert('아직 지원되지 않는 기능입니다.')">면불 신청</a></li>
                <li><a href="#" onclick="alert('아직 지원되지 않는 기능입니다.')">동아리</a></li>
                <li><a href="#" onclick="alert('아직 지원되지 않는 기능입니다.')">학교 생활</a></li>
            </ul>
        </div>
        
        <div class="widget profile-card-widget">
            <a href="{{ url_for('mypage') }}">
                <div class="profile-picture">
                    <img src="{{ url_for('static', filename=user.profile_image) }}" alt="프로필 사진">
                </div>
                <h4 class="nickname">{{ user.nickname }}</h4>
            </a>
            <div class="level-info">
                <span>Lv. {{ user.level }}</span>
                <div class="exp-bar">
                    <div class="exp-gauge" style="width: {{ user.exp/10 }}%;"></div>
                </div>
            </div>
            <div class="stats-info">
                <div>
                    <p class="stat-title">게시글</p>
                    <p class="stat-count">{{ user.post_count }}</p>
                </div>
                <div>
                    <p class="stat-title">댓글</p>
                    <p class="stat-count">{{ user.comment_count }}</p>
                </div>
            </div>
        </div>
    </aside>

    <section class="main-content">
        <div class="daily-meal">
            <div class="meal-item">
                <h4><span>조식</span></h4>
                <p class="meal-menu">{{ bob[0] |safe}}</p>
            </div>
            <div class="meal-item">
                <h4><span>중식</span></h4>
                <p class="meal-menu">{{ bob[1] |safe}}</p>
            </div>
            <div class="meal-item">
                <h4><span>석식</span></h4>
                <p class="meal-menu">{{ bob[2] |safe}}</p>
            </div>
            <div class="meal-item timetable-widget">
                <h4><span>시간표</span></h4>
                <ol class="timetable-list">
                    <li><span class="period">1교시</span><span class="subject">문학</span></li>
                    <li><span class="period">2교시</span><span class="subject">수학 II</span></li>
                    <li><span class="period">3교시</span><span class="subject">물리학 I</span></li>
                    <li><span class="period">4교시</span><span class="subject">영어</span></li>
                    <li><span class="period">5교시</span><span class="subject">영어</span></li>
                    <li><span class="period">6교시</span><span class="subject">영어</span></li>
                    <li><span class="period">7교시</span><span class="subject">영어</span></li>
                </ol>
            </div>
        </div>
        <div class="board-preview">
            <div class="board-column">
                <h3><a href="/board/1">자유게시판</a></h3>
                <ul>
                    {# 1. DB에서 불러온 게시글 목록을 먼저 출력합니다. #}
                    {% for post in free_posts %}
                    <li>
                        <a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a>
                        <span>{{ post.updated_at|datetime }}</span>
                    </li>
                    {% endfor %}

                    {# 2. 만약 게시글 수가 5개 미만이라면, 빈 자리를 채우기 위해 5에서 게시글 수를 뺀 만큼 반복합니다. #}
                    {% if free_posts|length < 5 %}
                        {% for i in range(5 - free_posts|length) %}
                        <li>
                            <a href="#">게시글이 없습니다.</a>
                            <span></span>
                        </li>
                        {% endfor %}
                    {% endif %}
                </ul>
            </div>
            <div class="board-column">
                <h3><a href="/board/2">정보게시판</a></h3>
                <ul>
                    {# 1. 정보게시판도 동일한 방식으로 먼저 게시글을 출력합니다. #}
                    {% for post in info_posts %}
                    <li>
                        <a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a>
                        <span>{{ post.updated_at|datetime }}</span>
                    </li>
                    {% endfor %}

                    {# 2. 정보게시판도 5개 미만일 경우 빈 자리를 채웁니다. #}
                    {% if info_posts|length < 5 %}
                        {% for i in range(5 - info_posts|length) %}
                        <li>
                            <a href="#">게시글이 없습니다.</a>
                            <span></span>
                        </li>
                        {% endfor %}
                    {% endif %}
                </ul>
            </div>
        </div>
    </section>

    <aside class="sidebar right-sidebar">
        <div class="widget search-widget">
            <form method="GET" action="{{ url_for('search') }}">
                <input type="text" name="q" placeholder="전체 게시판의 글을 검색하세요!">
            </form>
        </div>
        
        <div class="widget">
            <h3>실시간 인기글</h3>
            <ul>
                {# 1. DB에서 불러온 게시글 목록을 먼저 출력합니다. #}
                {% for post in trending_posts %}
                    <li><a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a></li>
                {% endfor %}

                {# 2. 만약 게시글 수가 5개 미만이라면, 빈 자리를 채웁니다. #}
                {% if trending_posts|length < 5 %}
                    {% for i in range(5 - trending_posts|length) %}
                    <li><a href="#" style="color: #888; cursor: default;">글이 없습니다.</a></li>
                    {% endfor %}
                {% endif %}
            </ul>
        </div>
        <div class="widget">
            <h3>HOT 게시글</h3>
             <ul>
                {# 1. HOT 게시물도 동일한 방식으로 먼저 출력합니다. #}
                {% for post in hot_posts %}
                    <li><a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a><span>+{{ post.like_count }}</span></li>
                {% endfor %}

                {# 2. HOT 게시물도 5개 미만일 경우 빈 자리를 채웁니다. #}
                {% if hot_posts|length < 5 %}
                    {% for i in range(5 - hot_posts|length) %}
                    <li><a href="#" style="color: #888; cursor: default;">글이 없습니다.</a><span></span></li>
                    {% endfor %}
                {% endif %}
            </ul>
        </div>
    </aside>
</main>
{% endblock %}