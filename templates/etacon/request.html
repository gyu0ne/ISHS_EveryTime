{% extends "base.html" %}

{% block title %}log인곽 - 에타콘 등록{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/etacon_request.css') }}">
{% endblock %}

{% block content %}
<div class="etacon-container">
    <header class="etacon-header">
        <button type="button" class="back-button" onclick="history.back()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <h1>에타콘 등록 요청</h1>
    </header>

    <form method="POST" enctype="multipart/form-data" class="etacon-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        
        <div class="form-group">
            <label for="name">패키지 이름</label>
            <input type="text" name="name" id="name" placeholder="패키지 이름" required maxlength="20">
        </div>

        <div class="form-group">
            <label for="description">설명</label>
            <textarea name="description" id="description" placeholder="패키지에 대한 간단한 설명" rows="3"></textarea>
        </div>

        <div class="form-group">
            <label for="price">판매 가격 (포인트)</label>
            <input type="number" name="price" id="price" placeholder="0" min="0" value="0" required>
            <p class="help-text">* 0 입력 시 무료로 배포됩니다.</p>
        </div>

        <div class="form-group">
            <label for="thumbnail">대표 썸네일</label>
            <div class="file-input-wrapper">
                <input type="file" name="thumbnail" id="thumbnail" accept="image/png, image/jpeg, image/gif" required>
                <span class="file-label">이미지 선택...</span>
            </div>
        </div>

        <div class="form-group">
            <label for="etacon_files">에타콘 이미지 (여러 개 선택 가능)</label>
            <div class="file-input-wrapper">
                <input type="file" name="etacon_files" id="etacon_files" accept="image/png, image/jpeg, image/gif" multiple required>
                <span class="file-label">이미지들을 선택해주세요...</span>
            </div>
            <p class="help-text">* GIF, PNG, JPG 지원 (여러 파일을 한 번에 드래그하거나 선택하세요)</p>
        </div>

        <button type="submit" class="btn-submit">등록 요청</button>
    </form>
</div>

<script>
    // 파일 선택 시 파일명 표시 스크립트
    document.querySelectorAll('input[type="file"]').forEach(input => {
        input.addEventListener('change', function(e) {
            const label = this.nextElementSibling;
            if (this.files && this.files.length > 1) {
                label.textContent = `${this.files.length}개 파일 선택됨`;
            } else if (this.files && this.files.length === 1) {
                label.textContent = this.files[0].name;
            }
        });
    });
</script>
{% endblock %}